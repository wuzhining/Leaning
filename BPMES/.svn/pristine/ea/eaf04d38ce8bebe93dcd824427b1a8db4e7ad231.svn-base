/* 启动时加载 *//* */(function() {	function materialMaintenance() {		initGridData = function() {			var dgrid = dataGrid.datagrid('options');			if(!dgrid) return;			var tmp = {                url: "/iPlant_ajax",                dataType: "JSON",                data: {IFS: "B000021"},                successCallBack: function(a) {                	dataTmp = [];                	var op = a.RESPONSE[0].RESPONSE_DATA;                    $.each(op,function(n,obj) {                    	dataTmp.push({'value':obj.FT_CD,'text':obj.FT_NM});				    });                  },                errorCallBack: function() {                    $.messager.alert("提示", '请联系管理员，查询失败！')                }            };			iplantAjaxRequest(tmp);			searchDataGrid(dgrid);		}				bindGridData = function(reqData, jsonData) {			var gridList = {				name: 'ProcessBom_tab',				dataType: 'json',				columns: [[					{field: 'FCT_CD',title: '工厂名称',width: 120,align: 'center',formatter: function (value,row) {if(checkNotEmpty(value)) return "<span title='" + value + "'>" + ( row.FCT_NM  || value)+ "</span>";},				           		   editor:{type:'combobox',options:{valueField:'value',textField:'text',data:dataTmp,required:true,editable:false}}},					{field: 'BOM_CD',title: '产品编码',width: 150,align: 'center',color: "blue",formatter: function (value) {if(checkNotEmpty(value)) return "<span title='" + value + "'>" + value + "</span>";},editor:{type:'validatebox',			        	   options:{required:true, validType:['length[1,50]','specialTextCharacter']}}},			        {field: 'BOM_NM',title: '产品名称',width: 150,align: 'center',color: "blue",formatter: function (value) {if(checkNotEmpty(value)) return "<span title='" + value + "'>" + value + "</span>";},editor:{type:'validatebox',				        	   options:{required:true, validType:['length[1,50]','specialTextCharacter']}}},					{field: 'ASMBLY_ITEM_CD',title: '所需装配物料',width: 150,align: 'center',formatter:function(){		        		   return "<img href='javascript:void(0)' class='easyui-linkbutton' src='../../../common/IplantCompent/themes/default/images/Folder.png'/>"}},					{field: 'BAR_CD_RULES',title: '条码规则',width: 150,align: 'center',formatter: function (value) {if(checkNotEmpty(value)) return "<span title='" + value + "'>" + value + "</span>";},editor:{type:'validatebox',			        	   options:{validType:['length[1,50]','specialTextCharacter']}}},			        {field: 'EFFECTIVE_DATE',title: '有效截至',width: 170,align: 'center',formatter: function (value) {if(checkNotEmpty(value)) return "<span title='" + value + "'>" + value + "</span>";},editor:{type:'datebox',			        	   options:{validType:['length[1,50]','specialTextCharacter']}}},			        {field: 'USE_YN',title: '使用与否',width: 80,align: 'center',formatter: function(value, row, index) {if(value == 'Y') { return '是';} else { return '否';}},editor:{type:'checkbox',options:{on: 'Y',off: 'N'}}},					{field: 'MO',title: '备注',width: 100,align: 'center',formatter: function (value) {if(checkNotEmpty(value)) return "<span title='" + value + "'>" + value + "</span>";},editor:{type:'validatebox',				           options:{validType:['length[0,50]','specialTextCharacter']}}},			        {field: 'CRT_ID',title: '创建人',width: 80,align: 'center',formatter: function (value) {if(checkNotEmpty(value)) return "<span title='" + value + "'>" + value + "</span>";}},					{field: 'CRT_DT',title: '创建时间',width: 180,align: 'center',formatter: function (value) {if(checkNotEmpty(value)) return "<span title='" + value + "'>" + value + "</span>";}}, 					{field: 'UPT_ID',title: '修改人',width: 80,align: 'center',formatter: function (value) {if(checkNotEmpty(value)) return "<span title='" + value + "'>" + value + "</span>";}}, 					{field: 'UPT_DT',title: '修改时间',width: 180,align: 'center',formatter: function (value) {if(checkNotEmpty(value)) return "<span title='" + value + "'>" + value + "</span>";}}					]],				/**结束编辑模式的操作*/			     onEndEdit:function(index,row){			    	 var ed = $(this).datagrid('getEditor', {index: index,field: 'FCT_CD'});			    	 row.FCT_CD = $(ed.target).combobox('getValue');			    	 row.FCT_NM = $(ed.target).combobox('getText');			     },			     /**进入编辑模式的操作*/			     onBeforeEdit:function(index,row){			    	 showmessage.html('');			    	 row.editing = true;			    	 row.edited = false;			    	 oldRow = JSON.stringify(row).replace(reg,'\"\"');			    	 $(this).datagrid('refreshRow', index);			     },			     /**编辑模式进入之后的操作*/			     onAfterEdit:function(index,row){			    	 /**判断是否进行数据变更*/			    	 var temp = JSON.stringify(row).replace(reg,'\"\"');			    	 if(temp!=oldRow){			    		 row.edited = true;			    	 }			    	 row.editing = false;			    	 $(this).datagrid('refreshRow', index);			     },		        onCancelEdit:function(index,row){		            row.editing = false;		            $(this).datagrid('refreshRow', index);		        },		        /**单击进入编辑模式*/		        onClickCell: function (index,field,value) {		        	var tabName,dialogName,titleName,rowEdit,editem,editorFt,itemCd,reqData,dgrid;		        	var rows = dataGrid.datagrid('getRows'),row = rows[index];		        	/**判断是否为可编辑字段*/		        	if(field=='ASMBLY_ITEM_CD'){		        		endEditingAll(dataGrid);						titleName = 'MSD设置',						dialogName = 'MaterialType_open',						tabName = 'materialMSD_tab',						$("#MSDtitle").html(row.PROD_CODE),						prodeC = row.PROD_CODE,						barcdru = row.BAR_CD_RULES,						bomNM = row.BOM_NM,						$("#search_PROD_CODE2").textbox('setValue',row.PROD_CODE),						$("#search_ASMBLY_PROCS2").textbox('setValue',row.ASMBLY_PROCS),						$("#search_ASMBLY_SORT").textbox('setValue',row.ASMBLY_SORT),						$("#search_BAR_CD_RULES").textbox('setValue',row.BAR_CD_RULES),						dgrid = $('#ProcessBom_tab').datagrid('options'),						dgrid.itemCd = row.BOM_CD,						dgrid.fctCd = row.FCT_CD,						FCTCD = row.FCT_CD						EFFECTIVE_DATE = row.EFFECTIVE_DATE						reqData = {									IFS: 'Z000060',									BOM_CD:row.BOM_CD,									pageIndex: 1,									pageSize: dgrid.pageSize									};												var bom2 = {				                url: "/iPlant_ajax",				                dataType: "JSON",				                data: {IFS:'Z000007'},				                successCallBack: function(a) {				                	var op = a.RESPONSE[0].RESPONSE_DATA;				                    $.each(op,function(n,obj) {				                    	dataBOM.push({'text':obj.ITEM_CD+"("+obj.ITEM_NM+")",'value':obj.ITEM_CD});				                    	BOM[a.RESPONSE[0].RESPONSE_DATA[n].ITEM_CD]=a.RESPONSE[0].RESPONSE_DATA[n].ITEM_NM;								    });  				                },				                errorCallBack: function() {				                    $.messager.alert("提示", '请联系管理员，查询失败！')				                }				            };						iplantAjaxRequest(bom2);						openDialogFrame(tabName,dialogName,titleName,reqData)		        	}else if(field=='img2'){		        				        	}else if(field=='img3'){		        				        	}else if(field=='img4'){		        				        	}else{			        	if (editIndex != index){				    		if(editIndex!=undefined){			    				/**判断是否为新增行，并验证新增工厂编码重复*/				    			rowEdit = dataGrid.datagrid('getRows')[editIndex];				    			if(checkNotEmpty(rowEdit.editType)){				    				if(rowEdit.editType=='add'){						    			}else{							        	   addDatagridEditor(dataGrid,index);						    			}				    				}else{				    					addDatagridEditor(dataGrid,index);				    				}				    			}else{						    		 addDatagridEditor(dataGrid,index);				    			}				    		}else{				    			addDatagridEditor(dataGrid,index);				    		}				    	}		        },		        /**单击进入编辑模式*/			}			initGridView(reqData, gridList);			dataGrid.datagrid('loadData', jsonData);		},		searchDataGrid=function(dgrid){			var search_PROD_CODE = $('#search_PROD_CODE').textbox('getValue'),search_ASMBLY_PROCS = $('#search_ASMBLY_PROCS').textbox('getValue');			var reqData = {				IFS: 'Z000025',				BOM_CD:search_PROD_CODE,				BOM_NM:search_ASMBLY_PROCS,				pageIndex: 1,				pageSize: dgrid.pageSize			}			reqGridData('/iPlant_ajax', 'ProcessBom_tab', reqData);		},		openDialogFrame =function(tabName,dialogName,titleName,reqData){			$("#"+dialogName).dialog("open").dialog('setTitle', titleName);			if(checkNotEmpty(reqData)){				dialogDataGrid('/iPlant_ajax', tabName, reqData);			}		},		dialogEditorDataGrid = function(tabName,reqData, jsonData) {			/*根据tabName判断哪个列表*/			var columnsTab,edDataGrid,messageInfo;			if(tabName=='materialMSD_tab'){				columnsTab=[						{field: 'FCT_CD',title: '工厂名称',hidden:true,width: 120,align: 'center',formatter: function (value,row) {if(checkNotEmpty(value)) return "<span title='" + value + "'>" + FCTCD+ "</span>";}},						{field: 'BOM_CD',title: '产品条码',hidden:true,width: 120,align: 'center',formatter: function (value,row) {if(checkNotEmpty(value)) return "<span title='" + value + "'>" + prodeC+ "</span>";}},						{field: 'BOM_NM',title: '产品名称',hidden:true,width: 120,align: 'center',formatter: function (value,row) {if(checkNotEmpty(value)) return "<span title='" + value + "'>" + bomNM+ "</span>";}},						{field: 'BAR_CD_RULES',title: '条码规则',hidden:true,width: 120,align: 'center',formatter: function (value,row) {if(checkNotEmpty(value)) return "<span title='" + value + "'>" + barcdru+ "</span>";}},						{field: 'EFFECTIVE_DATE',title: '有效期至',hidden:true,width: 120,align: 'center',formatter: function (value,row) {if(checkNotEmpty(value)) return "<span title='" + value + "'>" + barcdru+ "</span>";}},						{field: 'TRACE_WAY',title: '追溯方式',hidden:true,width: 120,align: 'center',formatter: function (value,row) {if(checkNotEmpty(value)) return "<span title='" + value + "'>" + traceway+ "</span>";}},						{field: 'ASMBLY_SORT',title: '装配顺序',hidden:true,width: 120,align: 'center',formatter: function (value,row) {if(checkNotEmpty(value)) return "<span title='" + value + "'>" + asmblysort+ "</span>";}},						{field: 'ASMBLY_PROCS',title: '装配工序',hidden:true,width: 120,align: 'center',formatter: function (value,row) {if(checkNotEmpty(value)) return "<span title='" + value + "'>" + asmblyprocs+ "</span>";}},					    {field:'ASMBLY_ITEM_CD',title: '物料编码', width:250,align:'center', 	                        editor:{   	                            type:'combobox', 	                            options:{ 	                            	valueField:'value',				 	                                textField:'text', 	                                panelWidth:250, 	                                panelHeight:250, 	                                editable:false, 	                                data:dataBOM, 	                                onSelect:function(data){	 										var target = $('#materialMSD_tab').datagrid('getEditor', {'index':ccIndex,'field':'ASMBLY_ITEM_NM'}).target; 										target.textbox('setValue', BOM[data.value]); 									} 	                            }     	                        } 	                      }, 	                     {field:'ASMBLY_ITEM_NM', title: '物料名称', width:120,align:'center',editor:{type:'textbox',options:{editable:false}}}, 						 {field: 'SEQ',title: 'ID',width: 150,hidden: true ,align: 'center',formatter: function (value) {if(checkNotEmpty(value)) return "<span title='" + value + "'>" + value + "</span>";},editor:{type:'validatebox',				        	   options:{validType:['length[1,50]','specialTextCharacter']}}},		        	     {field: 'UOM',title: '单位',width: 80,align: 'center',color: "blue",formatter: function (value) {if(checkNotEmpty(value)) return "<span title='" + value + "'>" + value + "</span>";},editor:{type:'validatebox',						       options:{validType:['length[1,50]','specialTextCharacter'],editable:true}}},				         {field: 'UNIT_QTY',title: '单位数量',width: 60,align: 'right',formatter: function (value) {if(checkNotEmpty(value)) return "<span title='" + value + "'>" + value + "</span>";},editor:{type:'numberbox', options:{precision:8,min:0}}, 		            	       formatter:function(value,row,index){ return formatNumber(value,0); }},			        	];				edDataGrid = $('#'+tabName);				messageInfo = $('#showMSDInfo');			}						var gridList = {				name: tabName,				dataType: 'json',				pagination:false,				rownumbers:true,				loadMsg: '数据加载中...',				columns: [columnsTab],						        /**单击进入编辑模式*/			     onClickRow: function (index, row) {			    	 ccIndex=index;                	 eeEndEdit('materialMSD_tab');                	 $('#materialMSD_tab').datagrid('selectRow', index).datagrid('beginEdit', index);                	 var BOM_CD = $("#MSDtitle").html();                	 var itemCODE = row.ASMBLY_ITEM_CD;                	 assignmentOrSave(BOM_CD,itemCODE);	            },			}			initGridView(reqData, gridList);			$('#'+tabName).datagrid('loadData', jsonData);		}	}			/*给弹框左侧区域赋值或输入值保存*/	 assignmentOrSave = function(BOM_CD,ASMBLY_ITEM_CD){		 var reqDate = {                 url: '/iPlant_ajax',                 dataType: 'JSON',                 data: {                	 BOM_CD: BOM_CD,                	 ASMBLY_ITEM_CD: ASMBLY_ITEM_CD,                     IFS: 'Z000060'                 },                 successCallBack: function (data) {                	/* 如果有值，把值加载到左侧区域*/                	 if(data.RESPONSE[0].RESPONSE_DATA.length > 0){                		 /*禁用左侧区域输入框*/                		 $("#search_ASMBLY_PROCS2").textbox({disabled:true});                		 $("#search_ASMBLY_SORT").textbox({disabled:true});                		 $("#search_BAR_CD_RULES").textbox({disabled:true});                		 $('input[name = items]').prop('disabled',true);                		                 		 $('#search_ASMBLY_PROCS2').textbox('setValue',data.RESPONSE[0].RESPONSE_DATA[0].ASMBLY_PROCS);                		 $('#search_ASMBLY_SORT').textbox('setValue',data.RESPONSE[0].RESPONSE_DATA[0].ASMBLY_SORT);                		 $('#search_BAR_CD_RULES').textbox('setValue',data.RESPONSE[0].RESPONSE_DATA[0].BAR_CD_RULES);                		 /*隐藏域赋值*/                		 $('#search_ASMBLY_PROCS3').val(data.RESPONSE[0].RESPONSE_DATA[0].ASMBLY_PROCS);                		 $('#search_ASMBLY_SORT2').val(data.RESPONSE[0].RESPONSE_DATA[0].ASMBLY_SORT);                		 $('#search_BAR_CD_RULES2').val(data.RESPONSE[0].RESPONSE_DATA[0].BAR_CD_RULES);                		 if(data.RESPONSE[0].RESPONSE_DATA[0].TRACE_WAY == '单个追溯'){                			 $('input[name = items]').prop('checked',false);                			 $('input[name = items2]').prop('checked',false);                			 $('#MonomerRetrospect').prop('checked',true);                			 $('#MonomerRetrospect2').prop('checked',true);                		 }else if(data.RESPONSE[0].RESPONSE_DATA[0].TRACE_WAY == '物料编码'){                			 $('input[name = items]').prop('checked',false);                			 $('input[name = items2]').prop('checked',false);                			 $('#MaterialNum').prop('checked',true);                			 $('#MaterialNum2').prop('checked',true);                		 }else if(data.RESPONSE[0].RESPONSE_DATA[0].TRACE_WAY == '批次追溯'){                			 $('input[name = items]').prop('checked',false);                			 $('input[name = items2]').prop('checked',false);                			 $('#BatchRetrospect').prop('checked',true);                			 $('#BatchRetrospect2').prop('checked',true);                		 }else if(data.RESPONSE[0].RESPONSE_DATA[0].TRACE_WAY == '外部批次'){                			 $('input[name = items]').prop('checked',false);                			 $('input[name = items2]').prop('checked',false);                			 $('#WithoutBatch').prop('checked',true);                			 $('#WithoutBatch2').prop('checked',true);                		 }                	 }else{                		 var ASMBLY_PROCS =$('#search_ASMBLY_PROCS2').textbox('getValue');                		 var ASMBLY_SORT =$('#search_ASMBLY_SORT').textbox('getValue');                		 var item = $('#check input[name=items]:checked').val();                	 }                     return;                 },                 errorCallBack: function (data) {                 	showmessage.html('<font color=red>查询失败！</font>');                     return;                 }             };             iplantAjaxRequest(reqDate);	 } 	 	 saveDataGridAssembly = function(){		 var ASMBLY_PROCS1 =$('#search_ASMBLY_PROCS2').textbox('getValue');		 var ASMBLY_SORT1 =$('#search_ASMBLY_SORT').textbox('getValue');		 var BAR_CD_RULES1 =$('#search_BAR_CD_RULES').textbox('getValue');		 var TRACE_WAY1 = $('#check input[name=items]:checked').val();		 var BOM_CD = $('#MSDtitle').html();		 		 var edDataGrid = $('#materialMSD_tab');         if (endEditing(edDataGrid)){        	/*判断后变更数据*/        	if (edDataGrid.datagrid('getChanges').length) {                var inserted = edDataGrid.datagrid('getChanges', "inserted");                  /**装载数据*/                var arrInsert = new Array(),arrUpdate = new Array();                if(inserted.length>0){                	for(var m=0;m<inserted.length;m++){                		arrInsert.push(inserted[m]);                	}                	arrInsert[0].ASMBLY_PROCS = ASMBLY_PROCS1;                 	arrInsert[0].ASMBLY_SORT = ASMBLY_SORT1;                 	arrInsert[0].TRACE_WAY = TRACE_WAY1;                 	arrInsert[0].FCT_CD = FCTCD;                 	arrInsert[0].BOM_CD = BOM_CD;                 	arrInsert[0].EFFECTIVE_DATE = EFFECTIVE_DATE;                 	arrInsert[0].BAR_CD_RULES = BAR_CD_RULES1;                	/*批量先增*/                	var ajaxInsert = {                            url: '/iPlant_ajax',                            dataType: 'JSON',                            data: {                                list: arrInsert,                                IFS: 'Z000061'                            },                            successCallBack: function (data) {                            	edDataGrid.datagrid('acceptChanges');                            	initGridData();                            	$('#showMSDInfo').html('<font color=red>保存成功！</font>');                                return;                            },                            errorCallBack: function (data) {                            	$('#showMSDInfo').html('<font color=red>保存失败！</font>');                                return;                            }                    };                    iplantAjaxRequest(ajaxInsert);                }        	}         }	 }	 	 	 saveDept = function(){		 saveDataGridAssembly();	 }	 	/*导入*/	OpenImprotFramedr = function(){		$("#enditTabupload").dialog("open").dialog('setTitle', '工序BOM导入');	}	importFile = function (){ 	   /* 以下即为完整客户端路径*/ 	   var pic = document.getElementById('txtPHOTO'),file,fileName,fileType,temp = [],strSrc; 	   if(pic.files.length>0){ 		   file = pic.files[0],fileName = file.name,fileType=file.type; 		   if(fileName.indexOf('.')>0){ 			   temp=fileName.split('.'); 			   strSrc = temp[temp.length-1]; 			   if(strSrc.toLowerCase().localeCompare('xlsx') === 0 || strSrc.toLowerCase().localeCompare('xls') === 0 ){ 				   $('#showFileName').html(fileName); 			   }else{ 				   $('#showFileName').html('<font color=red>请输入excel文件！</font>'); 				   return false; 			   } 		   } 	   }    }    ImportStation =function(){    	var webroot=document.location.origin;  	   var pic = document.getElementById('txtPHOTO'),file,fileName,fileType,temp = [],strSrc;  	   if(pic.files.length>0){  		   file = pic.files[0],fileName = file.name,fileType=file.type;  		   if(fileName.indexOf('.')>0){  			   temp=fileName.split('.');  			   strSrc = temp[temp.length-1];  			   if(strSrc.toLowerCase().localeCompare('xlsx') === 0 || strSrc.toLowerCase().localeCompare('xls') === 0 ){  				   $('#FILE_BELONG').val("BOM_CD"),  		    	   $('#FILE_CLS').val("import"),  		    	   $('#FILE_TYPE').val('xlsx'),  		    	   $('#importType').val('1'),  		    	   $('#IFS').val('Z000061');  				   var formData = new FormData($( "#importUplod" )[0]);    				   $.ajax({  		                cache: true,  		                type: "POST",  		                url:webroot+'/iTaurus/iPlant_ImgUpload',  		                data:formData,/* 你的formid*/  		                async: false,  		                processData:false,  		                contentType:false,  		                error: function(request) {  		                	$.messager.alert("提示", '导入失败！');  		                	console.log(request);  		                },  		                success: function(data) {  		                	$("#enditTabupload").dialog("close");  		                	initGridData();  		                	$.messager.alert("提示", '导入成功！');  		                }  		            });  			   }else{  				   $('#showFileName').html('<font color=red>请输入excel文件！</font>');  				   return false;  			   }  		   }  	   }    };	eeEndEdit = function(str){		var rows = $('#'+str).datagrid('getRows');		if(rows.length>0){			for(var i=0; i<rows.length; i++){				$('#'+str).datagrid('endEdit',i);			}		}	},		setDataNull = function () { 		          }		savaStation = function() {						var IFServerNo = '';			var reqData = [];		    if(CompanyOpttype == 0) {				IFServerNo = 'B000026'			} else if(CompanyOpttype == 1) {				if (!saveUpdateValidate()) {					$.messager.alert("提示", '内容没有更新，请修改')					return false;				}				IFServerNo = 'B000028'			} else {				IFServerNo = 'B000025'			}			var useYN = '';			if($('#txtStationUse').is(':checked')) {				useYN = "Y";			} else {				useYN = "N";			}			var susMsg = '',				errorMsg = '';			if(CompanyOpttype == 0) {				susMsg = '添加成功';				errorMsg = '添加失败,请联系管理员';			} else {				susMsg = '更新成功';				errorMsg = '更新失败,请联系管理员';			}			if(!checkForm()) return;			var ajaxParam = {				url: '/iPlant_ajax',				dataType: 'JSON',				data: {					PL_CD: $('#txtStationCode').val(),					PL_NM: $('#txtStationName').val(),					USE_YN: useYN,					FT_CD: $('#txtStationFactory').textbox('getValue'),					DICT_IT: $('#txtStationCategory').combobox('getValue'),					PL_RM: $('#txtNote').val(),					IFS: IFServerNo				},				successCallBack: function(data) {					var susMsg=getReturnMsg(data);                	$.messager.alert("提示",susMsg,"",function(){            			reqGridData('/iPlant_ajax','station_tab',{IFS:'B000025'});            			$('#enditTab').dialog('close');            			setDataNull();            			initGridData();            		});				},				errorCallBack: function() {					$.messager.alert('提示', errorMsg);				}								};			iplantAjaxRequest(ajaxParam);		},		materialMaintenance.prototype = {		init: function() {			$(function() {				/*初始化全局变量对象*/				dataGrid = $('#ProcessBom_tab'),dataCompany=[],dataFactory=[],dataTmp=[],dataBOM=[],showmessage=$('#showMessageInfo'),editIndex = undefined,oldRow=undefined, reg=new RegExp("null","g");				initGridData();				/*获取工厂类别下拉*/				$('#btnSearch').click(function() {										searchDataGrid(dataGrid);				});				$('#btnAdd').click(function() {							var initData = {};					initData={FCT_CD:dataTmp[0].value};					insertDataGrid('ProcessBom_tab',initData);				});								$('#btnDelete').click(function(){					deleteDataGrid('ProcessBom_tab','BOM_CD','Z000028','showMessageInfo');	            });				$('#btnSave').click(function() {					saveDataGrid('ProcessBom_tab','Z000026','Z000027','showMessageInfo');				});								$('.save').click(function() {									});								$('.close').click(function() {					$('#MaterialType_open').dialog('close');				});								/*弹框增删改*/				$('#btnMSDAdd').click(function() {						/*启用左侧区域输入框*/	           		 $("#search_ASMBLY_PROCS2").textbox({disabled:false});	           		 $("#search_ASMBLY_SORT").textbox({disabled:false});	           		 $("#search_BAR_CD_RULES").textbox({disabled:false});	           		 $('input[name = items]').prop('disabled',false);	           		 					ccIndex= 0;					eeEndEdit('materialMSD_tab');					var dgrid = $('#materialMSD_tab').datagrid('options');					var prodCode = $("#MSDtitle").html();						asmblyprocs = $('#search_ASMBLY_PROCS2').textbox('getValue'); /*装配工序*/					asmblysort = $('#search_ASMBLY_SORT').textbox('getValue'); /*装配序列*/					traceway = $('#check input[name=items]:checked').val();  /*追溯方式*/					$('#materialMSD_tab').datagrid('insertRow',{index:0,row:{FCT_CD:FCTCD,BOM_CD:prodeC,BOM_NM:bomNM,BAR_CD_RULES:barcdru,EFFECTIVE_DATE:EFFECTIVE_DATE,TRACE_WAY:traceway,ASMBLY_SORT:asmblysort,ASMBLY_PROCS:asmblyprocs,USE_YN:'Y'}});					$('#materialMSD_tab').datagrid('selectRow', 0).datagrid('beginEdit', 0); 				});											     								$('#btnMSDDelete').click(function(){					deleteDataGrid('materialMSD_tab','SEQ','Z000063','showMSDInfo');	            });				$('#btnMSDSave').click(function() {					saveDataGrid('materialMSD_tab','Z000061','Z000062','showMSDInfo');				});								$('#btnImport').click(function() {						/*导入*/					OpenImprotFramedr();				});								 $('#btnExprt').click(function(){						/*导出*/					 	var now = new Date();	                    var year =now.getFullYear();	                	var reqData = {	                			IFS:'Z000060'	                	}	                	createTable('tbIMESReport','工序BOM导出','materialMSD_tab',reqData);	                });			});		}	}	var fcfo = new materialMaintenance();var ccIndex= 0;/*全局索引;*/	var BOM = {},FCTCD,EFFECTIVE_DATE,prodeC,barcdru,bomNM,asmblyprocs,asmblysort,traceway	fcfo.init();})();